<div id="category">
  <!-- Start Banner Area -->
  <section class="banner-area organic-breadcrumb">
    <div class="container">
      <div
        class="breadcrumb-banner d-flex flex-wrap align-items-center justify-content-end"
      >
        <div class="col-first">
          <h1>Nike Sneaker Shop</h1>
          <nav class="d-flex align-items-center loca-nav"></nav>
        </div>
      </div>
    </div>
  </section>
  <!-- End Banner Area -->

  <div class="container">
    <div class="row">
      <div class="col-xl-3 col-lg-4 col-md-5">
        <div class="sidebar-categories">
          <div class="head">Thể Loại</div>
          <ul class="main-categories"></ul>
        </div>
        <div class="sidebar-filter mt-50">
          <div class="top-filter-head">Lọc sản phẩm</div>

          <div class="common-filter">
            <div class="head">Giá</div>
            <div class="price-range-area">
              <div id="price-range"></div>
              <div class="value-wrapper d-flex">
                <div class="price">Giá:</div>
                <div id="lower-value"></div>
                <span>đ</span>
                <div class="to">đến</div>
                <div id="upper-value"></div>
                <span>đ</span>
              </div>
            </div>
          </div>
          <div class="common-filter">
            <div class="head">Màu</div>
            <form action="#">
              <ul>
                <li class="filter-list">
                  <input
                    class="pixel-radio"
                    type="radio"
                    id="black"
                    name="color"
                  /><label for="black">Đen<span>(29)</span></label>
                </li>
                <li class="filter-list">
                  <input
                    class="pixel-radio"
                    type="radio"
                    id="balckleather"
                    name="color"
                  /><label for="balckleather">Xám nhạt<span>(29)</span></label>
                </li>
                <li class="filter-list">
                  <input
                    class="pixel-radio"
                    type="radio"
                    id="blackred"
                    name="color"
                  /><label for="blackred">Đen đỏ<span>(19)</span></label>
                </li>
                <li class="filter-list">
                  <input
                    class="pixel-radio"
                    type="radio"
                    id="gold"
                    name="color"
                  /><label for="gold">Vàng<span>(19)</span></label>
                </li>
                <li class="filter-list">
                  <input
                    class="pixel-radio"
                    type="radio"
                    id="spacegrey"
                    name="color"
                  /><label for="spacegrey">Xanh nhạt<span>(19)</span></label>
                </li>
              </ul>
            </form>
          </div>
        </div>
      </div>
      <div class="col-xl-9 col-lg-8 col-md-7">
        <!-- Start Filter Bar -->
        <div class="filter-bar d-flex flex-wrap align-items-center">
          <!-- <div class="sorting">
              <select>
                <option value="1">Default sorting</option>
                <option value="1">Default sorting</option>
                <option value="1">Default sorting</option>
              </select>
            </div> -->
          <div class="sorting mr-auto">
            <select>
              <option value="6">Hiện 6 sản phẩm</option>
              <option value="12">Hiện 12 sản phẩm</option>
              <option value="18">Hiện 18 sản phẩm</option>
            </select>
          </div>
          <div class="pagination">
            <a href="#" class="prev-arrow"
              ><i class="fa fa-long-arrow-left" aria-hidden="true"></i
            ></a>
            <a href="#" class="active">1</a>
            <a href="#">2</a>
            <a href="#">3</a>
            <a href="#" class="dot-dot"
              ><i class="fa fa-ellipsis-h" aria-hidden="true"></i
            ></a>
            <a href="#">6</a>
            <a href="#" class="next-arrow"
              ><i class="fa fa-long-arrow-right" aria-hidden="true"></i
            ></a>
          </div>
        </div>
        <!-- End Filter Bar -->
        <!-- Start Best Seller -->
        <section class="lattest-product-area pb-40 category-list">
          <div class="row main-product"></div>
        </section>
        <!-- End Best Seller -->
        <!-- Start Filter Bar -->
        <div class="filter-bar d-flex flex-wrap align-items-center">
          <div class="sorting mr-auto">
            <select>
              <option value="1">Hiện 6 sản phẩm</option>
              <option value="1">Hiện 12 sản phẩm</option>
              <option value="1">Hiện 18 sản phẩm</option>
            </select>
          </div>
          <div class="pagination">
            <a href="#" class="prev-arrow"
              ><i class="fa fa-long-arrow-left" aria-hidden="true"></i
            ></a>
            <a href="#" class="active">1</a>
            <a href="#">2</a>
            <a href="#">3</a>
            <a href="#" class="dot-dot"
              ><i class="fa fa-ellipsis-h" aria-hidden="true"></i
            ></a>
            <a href="#">6</a>
            <a href="#" class="next-arrow"
              ><i class="fa fa-long-arrow-right" aria-hidden="true"></i
            ></a>
          </div>
        </div>
        <!-- End Filter Bar -->
      </div>
    </div>
  </div>

  <!-- Start related-product Area -->
  <section class="related-product-area section_gap">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-lg-6 text-center">
          <div class="section-title">
            <h1>Ưu đãi trong tuần</h1>
            <p>
              Một trong những thương hiệu đồ thể thao lớn nhất và được biết đến
              nhiều nhất trên thế giới là Nike, có mặt ở tất cả các quốc gia,
              hiện giao sản phẩm trực tiếp từ trang web của mình. Mua ngay bây
              giờ và sử dụng phiếu giảm giá của Nike sneaker, bạn có thể nhận
              được giá tốt nhất và đảm bảo rằng những gì bạn mua là 100% nguyên
              bản.
            </p>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-lg-9">
          <div class="row sale-week"></div>
        </div>
        <div class="col-lg-3">
          <div class="ctg-right">
            <a href="#" target="_blank">
              <img
                class="img-fluid d-block mx-auto"
                src="images/category/c5.jpg"
                alt=""
              />
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>
  <!-- End related-product Area -->
</div>

<script>
  let slugCat = location.href.split("/")[3];

  url = `http://localhost:3000/api/${slugCat}`;

  fetch(url)
    .then((res) => res.json())
    .then((data) => {
      //render title page
      let title = document.querySelector(".title-page");
      title.innerHTML = `${data.titlePage}`;

      // render location nav
      let locaNav = document.querySelector(".loca-nav");

      locaNav.innerHTML = `
  			  <a href="../">Trang chủ<span class="lnr lnr-arrow-right"></span></a>
  			  <a href="">Shop<span class="lnr lnr-arrow-right"></span></a>
          <a href="../${slugCat}" class="cat_name">
            ${slugCat.split("-")[0]}

          </a>
        `;

      //main category
      let mainCate = document.querySelector(".main-categories");

      data.categories.forEach((cat) => {
        let active =
          cat.slug == slugCat
            ? `href="/${cat.slug}" style="color:#ffba00"`
            : `href="/${cat.slug}"`;
        mainCate.innerHTML += `
          <li class="main-nav-list">
            <a ${active}>
              <span class="lnr lnr-arrow-right"></span>
               ${cat.cat_name}
               <span class="number">(${cat.cat_product})</span>
            </a>
          </li>
       `;
      });

      let mainProduct = document.querySelector(".main-product");
      data.sneaker.forEach((sne) => {
        let sale =
          sne.sale != 0
            ? `
                <h6 class="l-through">
                    ${new Intl.NumberFormat().format(
                      sne.price + sne.price * sne.sale
                    )} VNĐ
                  </h6>`
            : "";
        mainProduct.innerHTML += `
            <!-- single product -->
            <div class="col-lg-4 col-md-6">
              <div class="single-product">
                <a href="/${sne.cate_slug}/${sne.slug}"
                  ><img class="img-fluid" src="${sne.image}" alt=""
                /></a>
                <div class="product-details">
                  <h6>${sne.pro_name}</h6>
                  <div class="price">
                    <h6>${new Intl.NumberFormat().format(sne.price)} VNĐ</h6>
                   ${sale}
                  </div>
                  <div class="prd-bottom">
                    <a href="" data="${sne.image}" class="social-info">
                      <span class="ti-bag"></span>
                      <p class="hover-text">Thêm vào túi</p>
                    </a>
                    <a href="" class="social-info">
                      <span class="lnr lnr-heart"></span>
                      <p class="hover-text">Yêu thích</p>
                    </a>
                    <a
                      href="/${sne.cate_slug}/${sne.slug}"
                      class="social-info"
                    >
                      <span class="lnr lnr-move"></span>
                      <p class="hover-text">Xem chi tiết</p>
                    </a>
                  </div>
                </div>
              </div>
            </div>
        `;
      });

      saleWeek();
    });
</script>

<script>
  function saleWeek() {
    let saleUrl = "http://localhost:3000/api/product/sale-week";

    fetch(saleUrl)
      .then((res) => res.json())
      .then((data) => {
        let saleWeek = document.querySelector(".sale-week");

        data.forEach((sne) => {
          saleWeek.innerHTML += `
                <div class="col-lg-4 col-md-4 col-sm-6 mb-20">
                  <div class="single-related-product d-flex">
                    <a href="#"><img width='70px' src="${
                      sne.image
                    }" alt="" /></a>
                    <div class="desc">
                      <a href="#" class="title">${sne.pro_name}</a>
                      <div class="price">
                        <h6>${new Intl.NumberFormat().format(
                          sne.price
                        )} VNĐ</h6>
                        <h6 class="l-through">
                          ${new Intl.NumberFormat().format(
                            sne.price + sne.price * sne.sale
                          )} VNĐ
                        </h6>
                      </div>
                    </div>
                  </div>
                </div>
        `;
        });

        main();
      });
  }
</script>
